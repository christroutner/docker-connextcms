# docker-connextcms
A Dockerfile used to create a Docker Image for running ConnextCMS and KeystoneJS in a Docker Container

This repository contains two Dockerfiles. The one in this root directory will create a Docker image
with a functional version of ConnextCMS and KeystoneJS. It depends on the official `mongo` Docker image,
and a repository of pre-compiled KeystoneJS code generated by the second Docker image below.

A second Dockerfile exists in the `buildFromSource` directory. This creates an environment ready to run
the `yo keystone` command to build KeystoneJS from scratch. This environment is used to create and update
the [keystone4-compiled](https://github.com/skagitpublishing/keystone4-compiled) repository used by the first 
Dockerfile.

The Dockerfiles assume that the MongoDB containerhas it's internal port 27017 mapped to host port 3500.

## Installation
It's assumed that you are starting with a fresh installation of Ubuntu 16.04 LTS on a 64-bit machine. 
It's also assumed that you are installing as a [non-root user with sudo privileges](https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-16-04). 

1. Install Docker on the host system. [This tutorial](https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-16-04)
shows how to install Docker on a Ubuntu 16.04 system. It's specifically targeted to Digital Ocean's cloud servers, but
should work for any Ubuntnu system.
Use [this link](https://m.do.co/c/8f47a23b91ce) to sign up for a Digital Ocean account and get a $10 credit, capable of
running a $5 server for two months.

2. Install Docker Compose too. [This tutorial](https://www.digitalocean.com/community/tutorials/how-to-install-docker-compose-on-ubuntu-16-04)
shows to do so on a Ubuntu system.

3. Clone this repository in your home directory and execute the following command:
`docker-compose up -d`

Docker will build the ConnextCMS Docker image and launch it. At the end of it, KeystoneJS will be running on port 80, with ConnextCMS running with it.

